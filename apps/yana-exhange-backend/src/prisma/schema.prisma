generator client {
  provider = "prisma-client-js"
  output   = "../../node_modules/database"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model ChatHistory {
  ChatHistoryId Int                     @id @default(autoincrement())
  CHRoomID      String                  @db.VarChar(30)
  Message       String                  @db.Text
  MessageFrom   ChatHistory_MessageFrom
  CHAttributes  Json
  CHCreatedOn   Int

  @@index([CHCreatedOn], map: "CHCreatedOn")
  @@index([CHRoomID], map: "CHRoomID")
  @@index([MessageFrom], map: "MessageFrom")
}

model ChatUsers {
  UniqueID            String  @id @db.VarChar(30)
  ChatUsersRoomID     String? @unique(map: "ChatUsersRoomID") @db.VarChar(30)
  ChatUsersAttributes Json
  Room                Room?   @relation(fields: [ChatUsersRoomID], references: [RoomID], onDelete: Cascade, map: "ChatUserRoomIdFk")
}

model Room {
  RoomID         String     @id @db.VarChar(30)
  RoomStatus     Int
  RoomChannelID  Int
  RoomAttributes Json
  RoomCreatedOn  Int
  ChatUsers      ChatUsers?

  @@index([RoomChannelID], map: "RoomChannelID")
  @@index([RoomCreatedOn], map: "RoomCreatedOn")
  @@index([RoomStatus], map: "RoomStatus")
}

enum ChatHistory_MessageFrom {
  AGENT
  BOT
  USER
}
